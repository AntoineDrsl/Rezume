<div class="wrapper-bc-cv" *ngIf="valid">

  <div class="wrapper">

    <div class="formContent">
      <h2 class="underlineHover">Quelques infos pour ton CV</h2>
      <form [formGroup]="cvForm" (ngSubmit)="onSubmit(cvForm)">

        <p>
          <mat-form-field class="form-group placeAge" appearance="standard">
            <mat-label>Ton âge</mat-label>
            <input matInput type="number" formControlName="age" required>
            <mat-error *ngIf="age.invalid">{{getErrorMessage()}}</mat-error>
          </mat-form-field>
        </p>

        <p>
          <mat-form-field class="form-group search" appearance="standard">
            <mat-label>Secteur de recherche</mat-label>
            <input matInput formControlName="research" required>
            <mat-error *ngIf="research.invalid">{{getErrorMessage()}}</mat-error>
          </mat-form-field>
        </p>

        <hr class="separator-line">

        <div formGroupName="experiences" class="experiences">
          <div class="category">
            <legend>Tes expériences
              <div (click)="addExperience()" class="plusContainer">
                <img src="/assets/images/plus.svg" alt="icon" class="icon-plus">
              </div>
            </legend>
          </div>
          <div class="input-group" *ngFor="let experienceControl of cvForm.get('experiences').controls; let i = index">
            <p>
              <mat-form-field class="form-group experience" appearance="standard">
                <mat-label>Expérience</mat-label>
                <input matInput [formControlName]="i" required>
                <mat-error *ngIf="i.invalid">{{getErrorMessage()}}</mat-error>
                <mat-icon (click)="deleteExperience(i)" matSuffix>delete</mat-icon>
              </mat-form-field>
            </p>
          </div>
        </div>

        <hr class="separator-line">

        <div formGroupName="degrees" class="degrees">
          <div class="category">
            <legend>Tes diplômes
              <div (click)="addDegree()" class="plusContainer">
                <img src="/assets/images/plus.svg" alt="icon" class="icon-plus">
              </div>
            </legend>
          </div>
          <div class="input-group" *ngFor="let degreeControl of cvForm.get('degrees').controls; let i = index">
            <p>
              <mat-form-field class="form-group degrees" appearance="standard">
                <mat-label>Diplôme</mat-label>
                <input matInput [formControlName]="i" required>
                <mat-error *ngIf="i.invalid">{{getErrorMessage()}}</mat-error>
                <mat-icon (click)="deleteDegree(i)" matSuffix>delete</mat-icon>
              </mat-form-field>
            </p>
          </div>
        </div>

        <hr class="separator-line">

        <div class="form-group button-cvSubmit">
          <input id="file" type="file" class="input-file" formControlName="image" (change)="onFileChange($event)"
                 #fileInput>
          <label for="file" class="label-file">Choisir un fichier</label>
        </div>
        <input type="submit" value="Créer ton CV" class="button-submitCV">
      </form>


      <!-- Success message -->
      <div class="success" *ngIf="showSuccessMessage">
        Votre CV est créé!
      </div>

      <!-- Error message -->
      <div class="alert" *ngIf="serverErrorMessages">
        {{serverErrorMessages}}
      </div>
    </div>
  </div>
</div>
